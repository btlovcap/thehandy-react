/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e={803:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{a(r.next(e))}catch(e){o(e)}}function c(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(776);t.default=class{constructor(e=!1){this.connected=!1,this.info=void 0,this.currentMode=s.HandyMode.unknown,this.hampState=s.HampState.stopped,this.hampVelocity=0,this.hdspPosition=0,this.hsspState=s.HsspState.needSetup,this.hsspLoop=!1,this.hsspPreparedUrl="",this.hstpTime=0,this.hstpOffset=0,this.hstpRtd=0,this.estimatedServerTimeOffset=0,this.slideMin=0,this.slideMax=0,this.slidePositionAbsolute=0,this._connectionKey="",this.verbose=e}get connectionKey(){return""===this._connectionKey&&"undefined"!=typeof window&&(this._connectionKey=localStorage.getItem("connectionKey")||""),this._connectionKey}set connectionKey(e){if(this._connectionKey=e,"undefined"==typeof window)throw new Error("Can only write connection key to localStorage on client-side!");localStorage.setItem("connectionKey",e)}getMode(){return r(this,void 0,void 0,(function*(){const e=yield this.getJson("mode");return this.currentMode=e.mode,this.connected=!0,e.mode}))}setMode(e){return r(this,void 0,void 0,(function*(){const t=yield this.putJson("mode",{mode:e});return this.currentMode=e,this.connected=!0,t.result}))}getConnected(){return r(this,void 0,void 0,(function*(){try{const e=yield this.getJson("connected");return this.connected=!!e.connected,!!e.connected}catch(e){return!1}}))}getInfo(){return r(this,void 0,void 0,(function*(){const e=yield this.getJson("info");return this.connected=!0,e}))}getSettings(){return r(this,void 0,void 0,(function*(){const e=yield this.getJson("settings");return this.slideMin=e.slideMin,this.slideMax=e.slideMax,this.connected=!0,e}))}getStatus(){return r(this,void 0,void 0,(function*(){const e=yield this.getJson("status");switch(this.currentMode=e.mode,e.mode){case 0:this.hampState=e.state;break;case 1:this.hsspState=e.state}return this.connected=!0,e}))}setHampStart(){return r(this,void 0,void 0,(function*(){this.currentMode!==s.HandyMode.hamp&&(yield this.setMode(s.HandyMode.hamp));const e=yield this.putJson("hamp/start",{});return this.hampState=s.HampState.moving,this.connected=!0,e.result}))}setHampStop(){return r(this,void 0,void 0,(function*(){this.currentMode!==s.HandyMode.hamp&&(yield this.setMode(s.HandyMode.hamp));const e=yield this.putJson("hamp/stop",{});return this.hampState=s.HampState.stopped,this.connected=!0,e.result}))}getHampState(){return r(this,void 0,void 0,(function*(){this.currentMode!==s.HandyMode.hamp&&(yield this.setMode(s.HandyMode.hamp));const e=yield this.getJson("hamp/state");return this.hampState=e.state,this.connected=!0,e}))}getHampVelocity(){return r(this,void 0,void 0,(function*(){this.currentMode!==s.HandyMode.hamp&&(yield this.setMode(s.HandyMode.hamp));const e=yield this.getJson("hamp/velocity");return this.hampVelocity=e.velocity,this.connected=!0,e.velocity}))}setHampVelocity(e){return r(this,void 0,void 0,(function*(){e=Math.min(100,Math.max(0,e)),this.currentMode===s.HandyMode.hamp&&this.hampState!=s.HampState.stopped||(yield this.setHampStart());const t=yield this.putJson("hamp/velocity",{velocity:e});return this.hampVelocity=e,this.connected=!0,t.result}))}setHdspXaVa(e,t,n){return r(this,void 0,void 0,(function*(){e=Math.min(110,Math.max(0,e)),t=Math.min(400,Math.max(-400,t)),this.currentMode!==s.HandyMode.hdsp&&(yield this.setMode(s.HandyMode.hdsp));const r=yield this.putJson("hdsp/xava",{position:e,velocity:t,stopOnTarget:!!n});return this.hdspPosition=e/110,this.connected=!0,r.result}))}setHdspXpVa(e,t,n){return r(this,void 0,void 0,(function*(){e=Math.min(100,Math.max(0,e)),t=Math.min(400,Math.max(-400,t)),this.currentMode!==s.HandyMode.hdsp&&(yield this.setMode(s.HandyMode.hdsp));const r=yield this.putJson("hdsp/xpva",{position:e,velocity:t,stopOnTarget:!!n});return this.hdspPosition=e,this.connected=!0,r.result}))}setHdspXpVp(e,t,n){return r(this,void 0,void 0,(function*(){e=Math.min(100,Math.max(0,e)),t=Math.min(100,Math.max(-100,t)),this.currentMode!==s.HandyMode.hdsp&&(yield this.setMode(s.HandyMode.hdsp));const r=yield this.putJson("hdsp/xpvp",{position:e,velocity:t,stopOnTarget:!!n});return this.hdspPosition=e,this.connected=!0,r.result}))}setHdspXaT(e,t,n){return r(this,void 0,void 0,(function*(){e=Math.min(110,Math.max(0,e)),t=Math.max(0,t),this.currentMode!==s.HandyMode.hdsp&&(yield this.setMode(s.HandyMode.hdsp));const r=yield this.putJson("hdsp/xat",{position:e,duration:Math.round(t),stopOnTarget:!!n});return this.hdspPosition=e/110,this.connected=!0,r.result}))}setHdspXpT(e,t,n){return r(this,void 0,void 0,(function*(){e=Math.min(100,Math.max(0,e)),t=Math.max(0,t),this.currentMode!==s.HandyMode.hdsp&&(yield this.setMode(s.HandyMode.hdsp));const r=yield this.putJson("hdsp/xpt",{position:e,duration:Math.round(t),stopOnTarget:!!n});return this.hdspPosition=e,this.connected=!0,r.result}))}setHsspPlay(e,t){return r(this,void 0,void 0,(function*(){if(this.currentMode!==s.HandyMode.hssp&&(yield this.setMode(s.HandyMode.hssp)),this.hsspState==s.HsspState.needSetup)throw new Error("Need to setup the Handy with a script before calling HSSP Play!");const n=yield this.putJson("hssp/play",{estimatedServerTime:Math.round(t||(new Date).valueOf()+this.hstpOffset),startTime:Math.round(e||0)});return this.hsspState=s.HsspState.playing,this.connected=!0,n.result}))}setHsspStop(){return r(this,void 0,void 0,(function*(){if(this.currentMode!==s.HandyMode.hssp&&(yield this.setMode(s.HandyMode.hssp)),this.hsspState==s.HsspState.needSetup)throw new Error("Need to setup the Handy with a script before calling HSSP Stop!");const e=yield this.putJson("hssp/stop",{});return this.hsspState=s.HsspState.stopped,this.connected=!0,e.result}))}setHsspSetup(e,t){return r(this,void 0,void 0,(function*(){this.currentMode!==s.HandyMode.hssp&&(yield this.setMode(s.HandyMode.hssp));const n={url:encodeURI(e)};t&&(n.sha256=t);const r=yield this.putJson("hssp/setup",n);return this.hsspPreparedUrl=e,this.connected=!0,r.result}))}getHsspLoop(){return r(this,void 0,void 0,(function*(){this.currentMode!==s.HandyMode.hssp&&(yield this.setMode(s.HandyMode.hssp));const e=yield this.getJson("hssp/loop");return this.hsspLoop=e.activated,this.connected=!0,e.activated}))}setHsspLoop(e){return r(this,void 0,void 0,(function*(){this.currentMode!==s.HandyMode.hssp&&(yield this.setMode(s.HandyMode.hssp));const t=yield this.putJson("hssp/loop",{activated:e});return this.hsspLoop=e,this.connected=!0,t.result}))}getHsspState(){return r(this,void 0,void 0,(function*(){this.currentMode!==s.HandyMode.hssp&&(yield this.setMode(s.HandyMode.hssp));const e=yield this.getJson("hssp/state");return this.hsspState=e.state,this.connected=!0,e.state}))}getHstpTime(){return r(this,void 0,void 0,(function*(){const e=yield this.getJson("hstp/time");return this.hstpTime=e.time,this.connected=!0,e.time}))}getHstpOffset(){return r(this,void 0,void 0,(function*(){const e=yield this.getJson("hstp/offset");return this.hstpOffset=e.offset,this.connected=!0,e.offset}))}setHstpoffset(e){return r(this,void 0,void 0,(function*(){const t=yield this.putJson("hstp/offset",{offset:Math.round(e)});return this.hstpOffset=e,this.connected=!0,t.result}))}getHstpRtd(){return r(this,void 0,void 0,(function*(){const e=yield this.getJson("hstp/rtd");return this.hstpRtd=e.rtd,this.connected=!0,e.rtd}))}getHstpSync(e=30,t=6){return r(this,void 0,void 0,(function*(){const n=yield this.getJson("hstp/sync",{syncCount:Math.round(e).toString(),outliers:Math.round(t).toString()});return this.hstpRtd=n.rtd,this.connected=!0,n}))}getSlideSettings(){return r(this,void 0,void 0,(function*(){const e=yield this.getJson("slide");return this.slideMin=e.min,this.slideMax=e.max,this.connected=!0,e}))}getSlidePositionAbsolute(){return r(this,void 0,void 0,(function*(){const e=yield this.getJson("slide/position/absolute");return this.slidePositionAbsolute=e.position,this.connected=!0,e.position}))}setSlideSettings(e,t){return r(this,void 0,void 0,(function*(){if(e>t){const n=t;t=e,e=n}const n=yield this.putJson("slide",{min:e,max:t});return this.slideMin=e,this.slideMax=t,this.connected=!0,n.result}))}setSlideMin(e,t=!1){return r(this,void 0,void 0,(function*(){e=Math.max(0,Math.min(100,e));const n=yield this.putJson("slide",{min:e,fixed:t||!1}),r=e-this.slideMin;return this.slideMin=e,t&&(this.slideMax+=r,this.slideMax=Math.max(0,Math.min(100,this.slideMax))),this.connected=!0,n.result}))}setSlideMax(e,t=!1){return r(this,void 0,void 0,(function*(){e=Math.max(0,Math.min(100,e));const n=yield this.putJson("slide",{max:e,fixed:t||!1}),r=e-this.slideMax;return this.slideMax=e,t&&(this.slideMin+=r,this.slideMin=Math.max(0,Math.min(100,this.slideMin))),this.connected=!0,n.result}))}getServerTime(){return r(this,void 0,void 0,(function*(){return(yield this.getJson("servertime")).serverTime}))}getServerTimeOffset(e=30,t){return r(this,void 0,void 0,(function*(){yield this.getServerTime();let n=[];for(let r=0;r<e;r++){const s=(new Date).valueOf(),o=yield this.getServerTime(),i=(new Date).valueOf(),c=o+(i-s)/2-i;n.push(c),t&&t(r/e)}const r=n.reduce(((e,t)=>e+t),0)/n.length,s=n.map((e=>Math.pow(e-r,2))),o=Math.sqrt(s.reduce(((e,t)=>e+t),0)/s.length);n=n.filter((e=>Math.abs(e-r)<o));const i=n.reduce(((e,t)=>e+t))/n.length;return this.estimatedServerTimeOffset=i,this.estimatedServerTimeOffset}))}enforceConnectionKey(){if(!this.connectionKey)throw this.connected=!1,new Error("connection key not set")}getUrl(e){return"https://www.handyfeeling.com/api/handy/v2/"+e}catchHttpErrors(e){return r(this,void 0,void 0,(function*(){if(400===e.status)throw new Error("Bad request");if(502===e.status)throw this.connected=!1,new Error("Machine not connected");if(504===e.status)throw this.connected=!1,new Error("Machine timeout");const t=yield e.json();if(-1===t.result)throw new Error("Unknown response error");if(t.error)throw 1e3==t.error.code||1001==t.error.code||1002==t.error.code?this.connected=!1:t.error.code&&(this.connected=!0),new Error(t.error.message);return t}))}getJson(e,t){return r(this,void 0,void 0,(function*(){this.enforceConnectionKey();let n=this.getUrl(e);t&&(n+="?"+Object.keys(t).map((e=>e+"="+t[e])).join("&")),this.verbose&&console.group("GET "+n);const r=yield fetch(n,{method:"GET",headers:{"X-Connection-Key":this.connectionKey}}),s=yield this.catchHttpErrors(r);return this.verbose&&(console.log("Response for GET "+n+": ",s),console.groupEnd()),s}))}putJson(e,t){return r(this,void 0,void 0,(function*(){this.enforceConnectionKey();const n=this.getUrl(e);this.verbose&&console.group("PUT "+n,t);const r=yield fetch(n,{method:"PUT",headers:{"X-Connection-Key":this.connectionKey,"Content-Type":"application/json"},body:JSON.stringify(t)}),s=yield this.catchHttpErrors(r);return this.verbose&&(console.log("Response for PUT "+n+": ",s),console.groupEnd()),s}))}}},875:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{a(r.next(e))}catch(e){o(e)}}function c(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){if(e)this._connectionKey=e,localStorage.setItem("connectionKey",e);else{const e=localStorage.getItem("connectionKey");this._connectionKey=e||""}this.serverTimeOffset=0}get connectionKey(){return this._connectionKey}set connectionKey(e){this._connectionKey=e,localStorage.setItem("connectionKey",e)}setMode(e){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const t=this.getUrl("setMode")+"?mode="+e,n=yield fetch(t),r=yield n.json();if(r.error)throw r;return r}))}toggleMode(e){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const t=this.getUrl("toggleMode")+"?mode="+e,n=yield fetch(t),r=yield n.json();if(r.error)throw r;return r}))}setSpeed(e,t){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const n=t?"mm/s":"%",r=this.getUrl("setSpeed")+"?speed="+e+"&type="+n,s=yield fetch(r),o=yield s.json();if(o.error)throw o;return o}))}setStroke(e,t){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const n=t?"mm":"%",r=this.getUrl("setStroke")+"?stroke="+e+"&type="+n,s=yield fetch(r),o=yield s.json();if(o.error)throw o;return o}))}setStrokeZone(e,t){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const n=this.getUrl("setStrokeZone")+"?min="+e+"&max="+t,r=yield fetch(n),s=yield r.json();if(s.error)throw s;return s}))}stepSpeed(e){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const t=this.getUrl("stepSpeed")+"?step="+e,n=yield fetch(t),r=yield n.json();if(r.error)throw r;return r}))}stepStroke(e){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const t=this.getUrl("stepStroke")+"?step="+e,n=yield fetch(t),r=yield n.json();if(r.error)throw r;return r}))}getVersion(){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const e=this.getUrl("getVersion"),t=yield fetch(e),n=yield t.json();if(n.error)throw n;return n}))}getSettings(){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const e=this.getUrl("getSettings"),t=yield fetch(e),n=yield t.json();if(n.error)throw n;return n}))}getStatus(){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const e=this.getUrl("getStatus"),t=yield fetch(e),n=yield t.json();if(n.error)throw n;return n}))}getServerTimeOffset(e=30,t){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const n=this.getUrl("getServerTime");yield(yield fetch(n)).json();let r=[];for(let s=0;s<e;s++){const o=(new Date).valueOf(),i=yield fetch(n),c=yield i.json(),a=(new Date).valueOf(),u=a-o,d=Number(c.serverTime)+u/2-a;r.push(d),t&&t(s/e)}const s=r.reduce(((e,t)=>e+t),0)/r.length,o=r.map((e=>Math.pow(e-s,2))),i=Math.sqrt(o.reduce(((e,t)=>e+t),0)/o.length);r=r.filter((e=>Math.abs(e-s)<i));const c=r.reduce(((e,t)=>e+t))/r.length;return this.serverTimeOffset=c,this.serverTimeOffset}))}syncPrepare(e,t,r){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();let n=this.getUrl("syncPrepare")+"?url="+e+"&timeout=30000";t&&(n+="&name="+t),r&&(n+="&size="+r);const s=yield fetch(n),o=yield s.json();if(o.error)throw o;return o}))}syncPlay(e=!0,t=0){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const n=Math.round((new Date).valueOf()+this.serverTimeOffset),r=this.getUrl("syncPlay")+"?play="+e+"&serverTime="+n+"&time="+t,s=yield fetch(r),o=yield s.json();if(o.error)throw o;return o}))}syncOffset(e){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const t=this.getUrl("syncOffset")+"?offset="+e,n=yield fetch(t),r=yield n.json();if(r.error)throw r;return r}))}syncAdjustTimestamp(e,t=.5){return n(this,void 0,void 0,(function*(){this.enforceConnectionKey();const n=this.getUrl("syncAdjustTimestamp")+"?currentTime="+1e3*e+"&serverTime="+Math.round((new Date).valueOf()+this.serverTimeOffset)+"&filter="+t,r=yield fetch(n),s=yield r.json();if(s.error)throw s;return s}))}uploadCsv(e,t){return n(this,void 0,void 0,(function*(){t||(t="script_"+(new Date).valueOf()+".csv");const n=new FormData;n.append("syncFile",e,t);const r=yield fetch("https://www.handyfeeling.com/api/sync/upload",{method:"post",body:n});return yield r.json()}))}enforceConnectionKey(){if(!this.connectionKey)throw new Error("connection key not set")}getUrl(e){return"https://www.handyfeeling.com/api/v1/"+this.connectionKey+"/"+e}}},34:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HandyLegacy=void 0;const s=r(n(803)),o=r(n(875));t.HandyLegacy=o.default,t.default=s.default},776:(e,t)=>{var n,r,s,o,i,c,a,u,d;Object.defineProperty(t,"__esModule",{value:!0}),t.HandyFirmwareStatus=t.HsspState=t.HsspSetupResult=t.SetHdspResult=t.HampState=t.SetHampStateResult=t.SetModeResult=t.GenericResult=t.HandyMode=void 0,(d=t.HandyMode||(t.HandyMode={}))[d.unknown=-1]="unknown",d[d.hamp=0]="hamp",d[d.hssp=1]="hssp",d[d.hdsp=2]="hdsp",(u=t.GenericResult||(t.GenericResult={}))[u.error=-1]="error",u[u.success=0]="success",(a=t.SetModeResult||(t.SetModeResult={}))[a.error=-1]="error",a[a.successNewMode=0]="successNewMode",a[a.successSameMode=1]="successSameMode",(c=t.SetHampStateResult||(t.SetHampStateResult={}))[c.error=-1]="error",c[c.successNewState=0]="successNewState",c[c.successSameState=1]="successSameState",(i=t.HampState||(t.HampState={}))[i.stopped=1]="stopped",i[i.moving=2]="moving",(o=t.SetHdspResult||(t.SetHdspResult={}))[o.error=-3]="error",o[o.successPositionReached=0]="successPositionReached",o[o.successPositionNotReached=1]="successPositionNotReached",o[o.successAlreadyAtPosition=2]="successAlreadyAtPosition",o[o.successInterrupted=3]="successInterrupted",(s=t.HsspSetupResult||(t.HsspSetupResult={}))[s.usingCached=0]="usingCached",s[s.downloaded=1]="downloaded",(r=t.HsspState||(t.HsspState={}))[r.needSetup=2]="needSetup",r[r.stopped=3]="stopped",r[r.playing=4]="playing",(n=t.HandyFirmwareStatus||(t.HandyFirmwareStatus={}))[n.upToDate=0]="upToDate",n[n.updateRequired=1]="updateRequired",n[n.updateAvailable=2]="updateAvailable"}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{HandyProvider:()=>v,default:()=>g});const e=require("react");var t=n.n(e),s=n(776),o=n(34),i=n.n(o);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){var r,s,o;r=e,s=t,o=n[t],(s=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}(s))in r?Object.defineProperty(r,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[s]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(){d=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new E(r||[]);return s(i,"_invoke",{value:T(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f="suspendedStart",y="suspendedYield",v="executing",m="completed",g={};function b(){}function M(){}function x(){}var w={};p(w,i,(function(){return this}));var S=Object.getPrototypeOf,H=S&&S(S(L([])));H&&H!==n&&r.call(H,i)&&(w=H);var k=x.prototype=b.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(s,o,i,a){var u=l(e[s],e,o);if("throw"!==u.type){var d=u.arg,p=d.value;return p&&"object"==c(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){d.value=e,i(d)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}var o;s(this,"_invoke",{value:function(e,r){function s(){return new t((function(t,s){n(e,r,t,s)}))}return o=o?o.then(s,s):s()}})}function T(t,n,r){var s=f;return function(o,i){if(s===v)throw new Error("Generator is already running");if(s===m){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var a=C(c,r);if(a){if(a===g)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===f)throw s=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=v;var u=l(t,n,r);if("normal"===u.type){if(s=r.done?m:y,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(s=m,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,s=t.iterator[r];if(s===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=l(s,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function K(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,o=function n(){for(;++s<t.length;)if(r.call(t,s))return n.value=t[s],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(c(t)+" is not iterable")}return M.prototype=x,s(k,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:M,configurable:!0}),M.displayName=p(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===M||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,p(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},O(P.prototype),p(P.prototype,a,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,s,o){void 0===o&&(o=Promise);var i=new P(h(e,n,r,s),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(k),p(k,u,"Generator"),p(k,i,(function(){return this})),p(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(K),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function s(r,s){return c.type="throw",c.arg=t,n.next=r,s&&(n.method="next",n.arg=e),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return s("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return s(i.catchLoc,!0);if(this.prev<i.finallyLoc)return s(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return s(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return s(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),K(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;K(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function p(e,t,n,r,s,o,i){try{var c=e[o](i),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,s)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function i(e){p(o,r,s,i,c,"next",e)}function c(e){p(o,r,s,i,c,"throw",e)}i(void 0)}))}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,o,i,c=[],a=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){u=!0,s=e}finally{try{if(!a&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=(0,e.createContext)(null),v=function(e){var n=e.verbose,r=e.children,s=m(n);return t().createElement(y.Provider,{value:s},r)},m=function(t){var n,r,o,c,a,p,f,y,v,m,g,b,M,x,w,S,H=l((0,e.useState)(new(i())(!!t)),1)[0],k=l((0,e.useState)(""),2),O=k[0],P=k[1],T=l((0,e.useState)(!1),2),C=T[0],j=T[1],K=l((0,e.useState)(""),2),E=K[0],L=K[1],_=l((0,e.useState)({connected:!1,info:void 0,currentMode:s.HandyMode.unknown,hampState:s.HampState.stopped,hampVelocity:0,hdspPosition:0,hsspState:s.HsspState.needSetup,hsspLoop:!1,hsspPreparedUrl:"",hstpTime:0,hstpOffset:0,hstpRtd:0,estimatedServerTimeOffset:0,slideMin:0,slideMax:0,slidePositionAbsolute:0}),2),R=_[0],z=_[1],J=(0,e.useCallback)(h(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return L(H.connectionKey),e.next=7,X();case 7:return e.next=9,D();case 9:return e.next=11,G();case 11:if(t=e.sent,(n=t.mode)!==s.HandyMode.hamp){e.next=18;break}return e.next=16,B();case 16:e.next=25;break;case 18:if(n!==s.HandyMode.hssp){e.next=25;break}return e.next=21,ie();case 21:return e.next=23,de();case 23:return e.next=25,he();case 25:case"end":return e.stop()}}),e)}))),[H]),U=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.currentMode);case 4:return j(!0),e.prev=5,e.next=8,H.getMode();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{currentMode:t,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.currentMode);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.currentMode]),A=(0,e.useCallback)((function(e){return(n=n||h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setMode(t);case 8:z((function(e){return u(u({},e),{},{currentMode:t,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),V=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,H.getConnected();case 7:return t=e.sent,z((function(e){return u(u({},e),{},{connected:t})})),e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(4),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})})),e.abrupt("return",H.connected);case 17:case"end":return e.stop()}}),e,null,[[4,12]])}))),[H]),N=(0,e.useCallback)((function(e){return(r=r||h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",!1);case 4:return H.connectionKey=t,L(t),e.next=8,V();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}),[H,V]),I=(0,e.useCallback)(h(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:H.connectionKey="",L(""),z((function(e){return u(u({},e),{},{connected:!1})}));case 7:case"end":return e.stop()}}),e)}))),[H,V]),X=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.info);case 4:return j(!0),e.prev=5,e.next=8,H.getInfo();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{info:t,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.info);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.info]),D=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",{slideMin:R.slideMin,slideMax:R.slideMax});case 4:return j(!0),e.prev=5,e.next=8,H.getSettings();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{slideMin:t.slideMin,slideMax:t.slideMax,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",{slideMin:R.slideMin,slideMax:R.slideMax});case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.slideMin,R.slideMax]),G=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",{mode:R.currentMode,state:R.currentMode===s.HandyMode.hamp?R.hampState:R.currentMode===s.HandyMode.hssp?R.hsspState:0});case 4:return j(!0),e.prev=5,e.next=8,H.getStatus();case 8:return(t=e.sent).mode===s.HandyMode.hamp?z((function(e){return u(u({},e),{},{currentMode:t.mode,hampState:t.state,connected:!0})})):t.mode===s.HandyMode.hssp?z((function(e){return u(u({},e),{},{currentMode:t.mode,hsspState:t.state,connected:!0})})):z((function(e){return u(u({},e),{},{currentMode:t.mode,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",{mode:R.currentMode,state:R.currentMode===s.HandyMode.hamp?R.hampState:R.currentMode===s.HandyMode.hssp?R.hsspState:0});case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.currentMode,R.hampState,R.hsspState]),F=(0,e.useCallback)(h(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHampStart();case 8:z((function(e){return u(u({},e),{},{hampState:s.HampState.moving,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hamp,connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])}))),[H]),q=(0,e.useCallback)(h(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHampStop();case 8:z((function(e){return u(u({},e),{},{hampState:s.HampState.stopped,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hamp,connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])}))),[H]),Y=(0,e.useCallback)((function(e){return(o=o||h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),t!==s.HampState.moving){e.next=6;break}return e.next=4,F();case 4:e.next=8;break;case 6:return e.next=8,q();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}),[H,F,q]),Z=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.hampState);case 4:return j(!0),e.prev=5,e.next=8,H.getHampState();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{hampState:t.state,connected:!0})})),j(!1),e.abrupt("return",t.state);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hamp,connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.hampState);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.hampState]),B=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.hampVelocity);case 4:return j(!0),e.prev=5,e.next=8,H.getHampVelocity();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hamp,hampVelocity:t,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.hampVelocity);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.hampVelocity]),$=(0,e.useCallback)((function(e){return(c=c||h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return P(""),j(!0),e.prev=6,e.next=9,H.setHampVelocity(t);case 9:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hamp,hampVelocity:t,connected:!0})})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 16:j(!1);case 17:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}),[H]),Q=(0,e.useCallback)((function(e,t,n){return(a=a||h(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHdspXaVa(t,n,r);case 8:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hdsp,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),W=(0,e.useCallback)((function(e,t,n){return(p=p||h(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHdspXpVa(t,n,r);case 8:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hdsp,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),ee=(0,e.useCallback)((function(e,t,n){return(f=f||h(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHdspXpVp(t,n,r);case 8:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hdsp,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),te=(0,e.useCallback)((function(e,t,n){return(y=y||h(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHdspXaT(t,n,r);case 8:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hdsp,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),ne=(0,e.useCallback)((function(e,t,n){return(v=v||h(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHdspXpT(t,n,r);case 8:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hdsp,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),re=(0,e.useCallback)((function(e,t){return(m=m||h(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHsspPlay(t,n);case 8:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hssp,hsspState:s.HsspState.playing,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),se=(0,e.useCallback)(h(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHsspStop();case 8:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hssp,hsspState:s.HsspState.stopped,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])}))),[H]),oe=(0,e.useCallback)((function(e,t){return(g=g||h(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHsspSetup(t,n);case 8:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hssp,hsspState:s.HsspState.stopped,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),ie=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.hsspLoop);case 4:return j(!0),e.prev=5,e.next=8,H.getHsspLoop();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hssp,hsspLoop:t,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.hsspLoop);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.hsspLoop]),ce=(0,e.useCallback)((function(e){return(b=b||h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHsspLoop(t);case 8:z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hssp,hsspLoop:t,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),ae=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.hsspState);case 4:return j(!0),e.prev=5,e.next=8,H.getHsspState();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{currentMode:s.HandyMode.hssp,hsspState:t,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.hsspState);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.hsspState]),ue=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.hstpTime);case 4:return j(!0),e.prev=5,e.next=8,H.getHstpTime();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{hstpTime:t,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.hstpTime);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.hstpTime]),de=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.hstpOffset);case 4:return j(!0),e.prev=5,e.next=8,H.getHstpOffset();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{hstpOffset:t,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.hstpOffset);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.hstpOffset]),pe=(0,e.useCallback)((function(e){return(M=M||h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setHstpOffset(t);case 8:z((function(e){return u(u({},e),{},{hstpOffset:t,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),he=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.hstpRtd);case 4:return j(!0),e.prev=5,e.next=8,H.getHstpRtd();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{hstpRtd:t,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.hstpRtd);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.hstpRtd]),le=(0,e.useCallback)(h(d().mark((function e(){var t,n,r,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:30,n=s.length>1&&void 0!==s[1]?s[1]:6,P(""),H){e.next=6;break}return P("Handy not initialized"),e.abrupt("return",{rtd:R.hstpRtd,time:0});case 6:return j(!0),e.prev=7,e.next=10,H.getHstpSync(t,n);case 10:return r=e.sent,z((function(e){return u(u({},e),{},{hstpRtd:r.rtd,connected:!0})})),j(!1),e.abrupt("return",r);case 16:e.prev=16,e.t0=e.catch(7),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 20:return j(!1),e.abrupt("return",{rtd:R.hstpRtd,time:0});case 22:case"end":return e.stop()}}),e,null,[[7,16]])}))),[H,R.hstpRtd]),fe=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",{min:R.slideMin,max:R.slideMax});case 4:return j(!0),e.prev=5,e.next=8,H.getSlideSettings();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{slideMin:t.min,slideMax:t.max,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",{min:R.slideMin,max:R.slideMax});case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.slideMin,R.slideMax]),ye=(0,e.useCallback)(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return",R.slidePositionAbsolute);case 4:return j(!0),e.prev=5,e.next=8,H.getSlidePositionAbsolute();case 8:return t=e.sent,z((function(e){return u(u({},e),{},{slidePositionAbsolute:t,connected:!0})})),j(!1),e.abrupt("return",t);case 14:e.prev=14,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 18:return j(!1),e.abrupt("return",R.slidePositionAbsolute);case 20:case"end":return e.stop()}}),e,null,[[5,14]])}))),[H,R.slidePositionAbsolute]),ve=(0,e.useCallback)((function(e,t){return(x=x||h(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),H){e.next=4;break}return P("Handy not initialized"),e.abrupt("return");case 4:return j(!0),e.prev=5,e.next=8,H.setSlideSettings(t,n);case 8:z((function(e){return u(u({},e),{},{slideMin:t,slideMax:n,connected:!0})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}),[H]),me=(0,e.useCallback)((function(e){return(w=w||h(d().mark((function e(t){var n,r,s,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],P(""),H){e.next=5;break}return P("Handy not initialized"),e.abrupt("return");case 5:return j(!0),e.prev=6,e.next=9,H.setSlideMin(t);case 9:n?(r=t-R.slideMin,s=Math.max(0,Math.min(100,R.slideMax+r)),z((function(e){return u(u({},e),{},{slideMin:t,slideMax:s,connected:!0})}))):z((function(e){return u(u({},e),{},{slideMin:t,connected:!0})})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 16:j(!1);case 17:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}),[H,R.slideMin,R.slideMax]),ge=(0,e.useCallback)((function(e){return(S=S||h(d().mark((function e(t){var n,r,s,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],P(""),H){e.next=5;break}return P("Handy not initialized"),e.abrupt("return");case 5:return j(!0),e.prev=6,e.next=9,H.setSlideMax(t);case 9:n?(r=t-R.slideMax,s=Math.max(0,Math.min(100,R.slideMin+r)),z((function(e){return u(u({},e),{},{slideMax:t,slideMin:s,connected:!0})}))):z((function(e){return u(u({},e),{},{slideMax:t,connected:!0})})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 16:j(!1);case 17:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}),[H,R.slideMin,R.slideMax]),be=(0,e.useCallback)(h(d().mark((function e(){var t,n,r,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:30,n=s.length>1?s[1]:void 0,P(""),H){e.next=6;break}return P("Handy not initialized"),e.abrupt("return",R.estimatedServerTimeOffset);case 6:return j(!0),e.prev=7,e.next=10,H.getServerTimeOffset(t,n);case 10:return r=e.sent,z((function(e){return u(u({},e),{},{estimatedServerTimeOffset:r,connected:!0})})),j(!1),e.abrupt("return",r);case 16:e.prev=16,e.t0=e.catch(7),P(e.t0.message),z((function(e){return u(u({},e),{},{connected:H.connected})}));case 20:return j(!1),e.abrupt("return",R.estimatedServerTimeOffset);case 22:case"end":return e.stop()}}),e,null,[[7,16]])}))),[H,R.estimatedServerTimeOffset]);return{error:O,loading:C,handyState:R,refresh:J,connect:N,disconnect:I,connectionKey:E,getMode:U,sendMode:A,getConnected:V,getInfo:X,getSettings:D,getStatus:G,sendHampStart:F,sendHampStop:q,sendHampState:Y,getHampState:Z,getHampVelocity:B,sendHampVelocity:$,sendHdspXaVa:Q,sendHdspXpVa:W,sendHdspXpVp:ee,sendHdspXaT:te,sendHdspXpT:ne,sendHsspPlay:re,sendHsspStop:se,sendHsspSetup:oe,getHsspLoop:ie,sendHsspLoop:ce,getHsspState:ae,getHstpTime:ue,getHstpOffset:de,sendHstpOffset:pe,getHstpRtd:he,getHstpSync:le,getSlideSettings:fe,getSlidePositionAbsolute:ye,sendSlideSettings:ve,sendSlideMin:me,sendSlideMax:ge,getServerTimeOffset:be}};const g=function(){var t=(0,e.useContext)(y);if(!t)throw new Error("For some reason, Handy context isn't initialized! This shouldn't happen...");return t}})(),module.exports=r})();